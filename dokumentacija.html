<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tehnička Dokumentacija - Hotel Management System</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <style>
        body {
            background: #f5f7fa;
            padding: 20px 0 60px;
        }
        .doc-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
            margin-bottom: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .doc-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        .doc-section h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        .doc-section h3 {
            color: #764ba2;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        .tech-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
        }
        .requirement-item {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .requirement-item strong {
            color: #667eea;
        }
        .file-tree {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        .file-tree .folder {
            color: #ffd700;
        }
        .file-tree .file {
            color: #98c379;
        }
        .file-tree .comment {
            color: #7c7c7c;
        }
        .diagram-placeholder {
            background: #f8f9fa;
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 60px;
            text-align: center;
            color: #666;
            margin: 20px 0;
        }
        .diagram-placeholder i {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }
        table {
            font-size: 0.95rem;
        }
        .table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .nav-pills .nav-link {
            color: #667eea;
            border: 2px solid #667eea;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .nav-pills .nav-link.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
        }
        .code-block {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 15px 0;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        .feature-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .feature-card i {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="doc-header">
        <div class="container">
            <h1 class="display-4 mb-3">
                <i class="bi bi-file-earmark-text"></i> Tehnička Dokumentacija
            </h1>
            <p class="lead">Hotel Management System - Kompletan Projektni Rad</p>
            <p>Sustav za upravljanje hotelima s naprednim značajkama i sigurnosnim zaštitama</p>
        </div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="doc-section">
            <nav>
                <ul class="nav nav-pills flex-column flex-sm-row">
                    <li class="nav-item">
                        <a class="nav-link active" href="#opis-zadatka">Opis Zadatka</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#rjesenje">Rješenje</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#tehnologije">Tehnologije</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#dijagrami">Dijagrami</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#struktura">Struktura</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#problemi">Problemi</a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- 1. OPIS PROJEKTNOG ZADATKA -->
        <div class="doc-section" id="opis-zadatka">
            <h2><i class="bi bi-clipboard-check"></i> 1. Opis Projektnog Zadatka</h2>
            
            <p class="lead">
                Izrada web aplikacije za upravljanje hotelima koristeći PHP, MySQL, HTML, CSS i JavaScript 
                s implementacijom svih 36 obveznih zahtjeva.
            </p>

            <h3>Glavni Ciljevi Projekta</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <i class="bi bi-database"></i>
                    <h5>CRUD Operacije</h5>
                    <p>Potpuno upravljanje hotelskim podacima</p>
                </div>
                <div class="feature-card">
                    <i class="bi bi-shield-lock"></i>
                    <h5>Sigurnost</h5>
                    <p>CSRF, XSS, SQL Injection zaštita</p>
                </div>
                <div class="feature-card">
                    <i class="bi bi-people"></i>
                    <h5>Korisnički Sustav</h5>
                    <p>Upravljanje korisnicima i ulogama</p>
                </div>
                <div class="feature-card">
                    <i class="bi bi-search"></i>
                    <h5>SEO Optimizacija</h5>
                    <p>SEO-friendly URL struktura</p>
                </div>
                <div class="feature-card">
                    <i class="bi bi-phone"></i>
                    <h5>Responsive Design</h5>
                    <p>Prilagodba svim uređajima</p>
                </div>
                <div class="feature-card">
                    <i class="bi bi-clock-history"></i>
                    <h5>Audit Log</h5>
                    <p>Praćenje svih promjena</p>
                </div>
            </div>

            <h3>Zahtjevi Projekta (36/36 Implementirano)</h3>
            
            <div class="requirement-item">
                <strong>Zahtjevi 1-5:</strong> MVC arhitektura, CRUD operacije, validacija podataka
            </div>
            <div class="requirement-item">
                <strong>Zahtjevi 6-10:</strong> AJAX komunikacija, dinamičko ažuriranje, sesije, cookies
            </div>
            <div class="requirement-item">
                <strong>Zahtjevi 11-15:</strong> Templating sistem, CSS Grid/Flexbox, responsive dizajn
            </div>
            <div class="requirement-item">
                <strong>Zahtjevi 16-20:</strong> Media queries, JSON manipulacija, RSS feed, external API
            </div>
            <div class="requirement-item">
                <strong>Zahtjevi 21-25:</strong> Kontakt forma, različiti pogledi za korisnike, audit log
            </div>
            <div class="requirement-item">
                <strong>Zahtjevi 26-30:</strong> User management, system settings, search, statistics, backup
            </div>
            <div class="requirement-item">
                <strong>Zahtjevi 31-36:</strong> Guest limits, SEO URLs, CSRF/XSS/SQL zaštita, dokumentacija
            </div>
        </div>

        <!-- 2. OPIS RJEŠENJA -->
        <div class="doc-section" id="rjesenje">
            <h2><i class="bi bi-lightbulb"></i> 2. Opis Projektnog Rješenja</h2>

            <h3>Arhitektura Aplikacije</h3>
            <p>
                Aplikacija koristi <strong>MVC (Model-View-Controller) arhitekturu</strong> s jasnom 
                separacijom odgovornosti:
            </p>

            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="card border-primary">
                        <div class="card-header bg-primary text-white">
                            <strong>Model (lib/)</strong>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li><i class="bi bi-check-circle text-success"></i> db_connection.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> Hotel.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> User.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> AuditLog.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> SessionManager.php</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-success">
                        <div class="card-header bg-success text-white">
                            <strong>View (templates/)</strong>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li><i class="bi bi-check-circle text-success"></i> header.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> footer.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> navigation.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> hotel_card.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> Reusable UI</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-warning">
                        <div class="card-header bg-warning text-dark">
                            <strong>Controller (api/)</strong>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li><i class="bi bi-check-circle text-success"></i> add_hotel.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> update_hotel.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> delete_hotel.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> login.php</li>
                                <li><i class="bi bi-check-circle text-success"></i> user_action.php</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="mt-4">Ključne Funkcionalnosti</h3>

            <table class="table table-bordered mt-3">
                <thead>
                    <tr>
                        <th width="30%">Funkcionalnost</th>
                        <th>Opis</th>
                        <th width="15%">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Hotel Management</strong></td>
                        <td>CRUD operacije za hotele s validacijom, AJAX dodavanje/uređivanje</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>User Authentication</strong></td>
                        <td>Login, registracija, Remember Me, account locking, failed attempts</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>Role-Based Access</strong></td>
                        <td>Admin, User, Guest uloge s različitim pravima pristupa</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>Audit Logging</strong></td>
                        <td>Automatsko praćenje svih INSERT/UPDATE/DELETE operacija</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>System Settings</strong></td>
                        <td>Dinamička konfiguracija sustava (pagination, security, limits)</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>Database Backup</strong></td>
                        <td>Backup i restore baze podataka s pregledom sadržaja</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>RSS Feed</strong></td>
                        <td>Automatski generirani RSS za najnovije hotele</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>Contact Form</strong></td>
                        <td>Kontakt forma s email notifikacijama i CSRF zaštitom</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>Statistics Dashboard</strong></td>
                        <td>Grafički prikaz statistika (Chart.js, graf traženja gradova)</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                    <tr>
                        <td><strong>SEO Optimization</strong></td>
                        <td>SEO-friendly URL-ovi (/hotel/123/naziv-hotela)</td>
                        <td><span class="badge bg-success">✓ Gotovo</span></td>
                    </tr>
                </tbody>
            </table>

            <h3>Sigurnosni Mehanizmi</h3>
            <div class="row mt-3">
                <div class="col-md-6">
                    <div class="code-block">
                        <strong><i class="bi bi-shield-check"></i> CSRF Zaštita</strong><br>
                        - 32-byte random tokeni<br>
                        - Session storage<br>
                        - 1 sat expiry<br>
                        - Timing-safe validacija<br>
                        - 9 formi + 9 API endpointa zaštićeno
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="code-block">
                        <strong><i class="bi bi-code-slash"></i> XSS Zaštita</strong><br>
                        - htmlspecialchars() za sve outpute<br>
                        - ENT_QUOTES flag<br>
                        - UTF-8 encoding<br>
                        - SEOHelper::escape() wrapper<br>
                        - 5+ stranica zaštićeno
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <div class="code-block">
                        <strong><i class="bi bi-database-lock"></i> SQL Injection Zaštita</strong><br>
                        - Prepared statements (mysqli)<br>
                        - Parameter binding<br>
                        - Tipiziranje parametara<br>
                        - Nema direktnog SQL-a<br>
                        - 100% pokrivenost
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="code-block">
                        <strong><i class="bi bi-person-lock"></i> Dodatne Zaštite</strong><br>
                        - HTTPS redirect<br>
                        - Password hashing (bcrypt)<br>
                        - Account locking<br>
                        - Session regeneration<br>
                        - Rate limiting pripremljen
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. TEHNOLOGIJE I ALATI -->
        <div class="doc-section" id="tehnologije">
            <h2><i class="bi bi-tools"></i> 3. Korištene Tehnologije i Alati</h2>

            <h3>Backend Tehnologije</h3>
            <div class="mb-3">
                <span class="tech-badge"><i class="bi bi-filetype-php"></i> PHP 8.x</span>
                <span class="tech-badge"><i class="bi bi-database"></i> MySQL 8.0</span>
                <span class="tech-badge"><i class="bi bi-server"></i> Apache 2.4 (XAMPP)</span>
                <span class="tech-badge"><i class="bi bi-clock-history"></i> Sessions & Cookies</span>
                <span class="tech-badge"><i class="bi bi-envelope"></i> PHPMailer</span>
            </div>

            <h3>Frontend Tehnologije</h3>
            <div class="mb-3">
                <span class="tech-badge"><i class="bi bi-filetype-html"></i> HTML5</span>
                <span class="tech-badge"><i class="bi bi-filetype-css"></i> CSS3</span>
                <span class="tech-badge"><i class="bi bi-filetype-js"></i> JavaScript (ES6+)</span>
                <span class="tech-badge"><i class="bi bi-bootstrap"></i> Bootstrap 5.3</span>
                <span class="tech-badge"><i class="bi bi-grid"></i> CSS Grid & Flexbox</span>
                <span class="tech-badge"><i class="bi bi-phone"></i> Responsive Design</span>
            </div>

            <h3>External Libraries & Frameworks</h3>
            <table class="table table-bordered mt-3">
                <thead>
                    <tr>
                        <th>Alat/Okvir</th>
                        <th>Verzija</th>
                        <th>Namjena</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Bootstrap</strong></td>
                        <td>5.3.0</td>
                        <td>CSS framework za responsive dizajn, grid sistem, komponente</td>
                    </tr>
                    <tr>
                        <td><strong>Bootstrap Icons</strong></td>
                        <td>1.11.0</td>
                        <td>SVG ikone za UI elemente</td>
                    </tr>
                    <tr>
                        <td><strong>Chart.js</strong></td>
                        <td>4.x</td>
                        <td>Grafički prikaz statistika (bar chart, line chart)</td>
                    </tr>
                    <tr>
                        <td><strong>Fetch API</strong></td>
                        <td>Native</td>
                        <td>AJAX komunikacija bez jQuery</td>
                    </tr>
                    <tr>
                        <td><strong>PHPMailer</strong></td>
                        <td>6.x</td>
                        <td>Slanje email notifikacija iz kontakt forme</td>
                    </tr>
                    <tr>
                        <td><strong>MySQL (via MySQLi)</strong></td>
                        <td>8.0</td>
                        <td>Relacijska baza podataka s prepared statements</td>
                    </tr>
                </tbody>
            </table>

            <h3>Development Tools</h3>
            <div class="mb-3">
                <span class="tech-badge"><i class="bi bi-code-square"></i> VS Code</span>
                <span class="tech-badge"><i class="bi bi-terminal"></i> Git</span>
                <span class="tech-badge"><i class="bi bi-box"></i> XAMPP</span>
                <span class="tech-badge"><i class="bi bi-browser-chrome"></i> Chrome DevTools</span>
                <span class="tech-badge"><i class="bi bi-braces"></i> Postman (API testing)</span>
            </div>

            <h3>Arhitekturalni Paterni</h3>
            <ul>
                <li><strong>MVC (Model-View-Controller):</strong> Separacija business logike, prezentacije i kontrole</li>
                <li><strong>Singleton:</strong> db_connection.php - jedna instanca DB konekcije</li>
                <li><strong>Factory:</strong> Router.php - kreiranje SEO URL-ova</li>
                <li><strong>Template Method:</strong> header.php, footer.php reusable templates</li>
                <li><strong>Repository:</strong> Hotel.php, User.php - enkapsulacija data access logike</li>
            </ul>
        </div>

        <!-- 4. DIJAGRAMI -->
        <div class="doc-section" id="dijagrami">
            <h2><i class="bi bi-diagram-3"></i> 4. Dijagrami Sustava</h2>

            <h3>4.1 Use Case Dijagram</h3>
            <p>Prikaz funkcionalnosti za različite tipove korisnika:</p>

            <div class="diagram-placeholder">
                <i class="bi bi-people-fill"></i>
                <h5>Use Case Diagram - Korisničke Uloge</h5>
                <div class="text-start mt-4" style="max-width: 700px; margin: 0 auto;">
                    <div class="row">
                        <div class="col-md-4">
                            <h6 class="text-primary"><i class="bi bi-person-circle"></i> Guest (Neregistrirani)</h6>
                            <ul style="font-size: 0.9rem;">
                                <li>Pregled hotela (ograničeno)</li>
                                <li>Pretraživanje</li>
                                <li>RSS feed</li>
                                <li>Registracija</li>
                                <li>Prijava</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-success"><i class="bi bi-person-check"></i> User (Registrirani)</h6>
                            <ul style="font-size: 0.9rem;">
                                <li>SVE iz Guest</li>
                                <li>Dodavanje hotela</li>
                                <li>Uređivanje hotela</li>
                                <li>Brisanje hotela</li>
                                <li>Kontakt forma</li>
                                <li>Potpuni pregled</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-danger"><i class="bi bi-shield-lock"></i> Admin</h6>
                            <ul style="font-size: 0.9rem;">
                                <li>SVE iz User</li>
                                <li>User management</li>
                                <li>System settings</li>
                                <li>Audit log</li>
                                <li>Statistics</li>
                                <li>Database backup</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <h3>4.2 ER Dijagram Baze Podataka</h3>
            <p>Relacijski model s 6 glavnih tablica:</p>

            <div class="file-tree">
┌────────────────────────────────────────────────────────────────┐
│                    DATABASE: hotel_management                    │
└────────────────────────────────────────────────────────────────┘

┌──────────────────────┐      ┌──────────────────────┐
│      HOTELS          │      │       USERS          │
├──────────────────────┤      ├──────────────────────┤
│ id (PK)             │      │ id (PK)             │
│ naziv               │      │ username (UNIQUE)   │
│ adresa              │      │ email (UNIQUE)      │
│ grad                │      │ password            │
│ zupanija            │      │ role (ENUM)         │
│ kapacitet           │      │ is_active           │
│ broj_soba           │      │ is_locked           │
│ broj_gostiju        │      │ failed_attempts     │
│ slobodno_soba       │      │ last_failed_login   │
│ kontakt_ime         │      │ created_at          │
│ kontakt_tel         │      │ updated_at          │
│ kontakt_email       │      └──────────────────────┘
│ created_at          │              │
│ updated_at          │              │ has many
└──────────────────────┘              ↓
        │                    ┌──────────────────────┐
        │ has many           │   REMEMBER_TOKENS     │
        ↓                    ├──────────────────────┤
┌──────────────────────┐    │ id (PK)             │
│    AUDIT_LOG         │    │ user_id (FK)        │
├──────────────────────┤    │ token (UNIQUE)      │
│ id (PK)             │    │ expires_at          │
│ table_name          │    │ created_at          │
│ record_id           │    └──────────────────────┘
│ action (ENUM)       │
│ old_data (JSON)     │    ┌──────────────────────┐
│ new_data (JSON)     │    │  SYSTEM_SETTINGS     │
│ user_id (FK)        │    ├──────────────────────┤
│ username            │    │ id (PK)             │
│ ip_address          │    │ setting_key (UNIQUE)│
│ user_agent          │    │ setting_value       │
│ created_at          │    │ description         │
└──────────────────────┘    │ category            │
                            │ updated_at          │
┌──────────────────────┐    └──────────────────────┘
│   CONTACT_MESSAGES   │
├──────────────────────┤    ┌──────────────────────┐
│ id (PK)             │    │   CITY_SEARCH_LOG    │
│ name                │    ├──────────────────────┤
│ email               │    │ id (PK)             │
│ message             │    │ city_name           │
│ status (ENUM)       │    │ search_count        │
│ admin_notes         │    │ last_searched       │
│ created_at          │    └──────────────────────┘
│ read_at             │
└──────────────────────┘

RELATIONSHIPS:
• users (1) → (N) audit_log
• users (1) → (N) remember_tokens
• hotels (1) → (N) audit_log (indirectly via record_id)
            </div>

            <h3>4.3 Application Flow Diagram</h3>
            <div class="diagram-placeholder">
                <i class="bi bi-diagram-2"></i>
                <h5>Request Flow</h5>
                <div class="text-start mt-4" style="max-width: 600px; margin: 0 auto; font-family: monospace;">
                    Browser → .htaccess (URL Rewrite)<br>
                    &nbsp;&nbsp;↓<br>
                    index.php / view.php / dashboard.php<br>
                    &nbsp;&nbsp;↓<br>
                    SessionManager::checkRememberMe()<br>
                    &nbsp;&nbsp;↓<br>
                    Database Query (prepared statements)<br>
                    &nbsp;&nbsp;↓<br>
                    Templates (header.php, footer.php)<br>
                    &nbsp;&nbsp;↓<br>
                    HTML Output (with XSS protection)<br>
                    &nbsp;&nbsp;↓<br>
                    AJAX Actions → api/*.php<br>
                    &nbsp;&nbsp;↓<br>
                    CSRFToken::validate()<br>
                    &nbsp;&nbsp;↓<br>
                    Database Operations<br>
                    &nbsp;&nbsp;↓<br>
                    AuditLog::log()<br>
                    &nbsp;&nbsp;↓<br>
                    JSON Response → JavaScript
                </div>
            </div>
        </div>

        <!-- 5. STRUKTURA PROJEKTA -->
        <div class="doc-section" id="struktura">
            <h2><i class="bi bi-folder-fill"></i> 5. Struktura Projekta</h2>

            <h3>5.1 Direktorijska Struktura</h3>
            <div class="file-tree">
hotel_managment/
│
├── <span class="folder">api/</span>                         <span class="comment"># Backend API endpoints (Controller)</span>
│   ├── <span class="file">add_hotel.php</span>             <span class="comment"># CRUD: Create hotel</span>
│   ├── <span class="file">update_hotel.php</span>          <span class="comment"># CRUD: Update hotel</span>
│   ├── <span class="file">delete_hotel.php</span>          <span class="comment"># CRUD: Delete hotel</span>
│   ├── <span class="file">login.php</span>                 <span class="comment"># User authentication</span>
│   ├── <span class="file">logout.php</span>                <span class="comment"># Session destruction</span>
│   ├── <span class="file">register_user.php</span>         <span class="comment"># User registration</span>
│   ├── <span class="file">contact_submit.php</span>        <span class="comment"># Contact form handler</span>
│   ├── <span class="file">save_setting.php</span>          <span class="comment"># System settings AJAX</span>
│   ├── <span class="file">user_action.php</span>           <span class="comment"># User management actions</span>
│   └── <span class="file">backup_database.php</span>       <span class="comment"># Database backup/restore</span>
│
├── <span class="folder">assets/</span>                      <span class="comment"># Static resources</span>
│   ├── <span class="folder">css/</span>                    <span class="comment"># Stylesheets</span>
│   │   ├── <span class="file">grid-flexbox.css</span>      <span class="comment"># CSS Grid & Flexbox</span>
│   │   ├── <span class="file">hotel-cards.css</span>       <span class="comment"># Hotel card styling</span>
│   │   ├── <span class="file">responsive.css</span>        <span class="comment"># @media queries</span>
│   │   ├── <span class="file">mobile-tables.css</span>     <span class="comment"># Responsive tables</span>
│   │   └── <span class="file">cookies.css</span>           <span class="comment"># Cookie banner</span>
│   ├── <span class="folder">js/</span>                     <span class="comment"># JavaScript files</span>
│   │   ├── <span class="file">hotel-crud.js</span>         <span class="comment"># AJAX CRUD operations</span>
│   │   ├── <span class="file">form-validation.js</span>    <span class="comment"># Client-side validation</span>
│   │   └── <span class="file">cookie-consent.js</span>     <span class="comment"># Cookie management</span>
│   └── <span class="folder">images/</span>                 <span class="comment"># Images & logos</span>
│       └── <span class="file">author-photo.jpg</span>      <span class="comment"># Author photo for autor.html</span>
│
├── <span class="folder">lib/</span>                         <span class="comment"># Business logic (Model)</span>
│   ├── <span class="file">db_connection.php</span>         <span class="comment"># Database connection singleton</span>
│   ├── <span class="file">config.php</span>                <span class="comment"># Global configuration</span>
│   ├── <span class="file">Hotel.php</span>                 <span class="comment"># Hotel model class</span>
│   ├── <span class="file">User.php</span>                  <span class="comment"># User model class</span>
│   ├── <span class="file">AuditLog.php</span>              <span class="comment"># Audit logging system</span>
│   ├── <span class="file">SessionManager.php</span>        <span class="comment"># Session & auth management</span>
│   ├── <span class="file">CSRFToken.php</span>             <span class="comment"># CSRF protection</span>
│   ├── <span class="file">SEOHelper.php</span>             <span class="comment"># SEO URL generation</span>
│   ├── <span class="file">Router.php</span>                <span class="comment"># URL routing</span>
│   ├── <span class="file">https_checker.php</span>         <span class="comment"># Force HTTPS redirect</span>
│   └── <span class="file">guest_limit.php</span>           <span class="comment"># Guest view restrictions</span>
│
├── <span class="folder">templates/</span>                   <span class="comment"># Reusable UI components (View)</span>
│   ├── <span class="file">header.php</span>                <span class="comment"># HTML head, navigation</span>
│   ├── <span class="file">footer.php</span>                <span class="comment"># Footer & scripts</span>
│   ├── <span class="file">navigation.php</span>            <span class="comment"># Main navigation menu</span>
│   └── <span class="file">hotel_card.php</span>            <span class="comment"># Hotel display card</span>
│
├── <span class="folder">backups/</span>                     <span class="comment"># Database backup files (.sql)</span>
│
├── <span class="file">index.php</span>                      <span class="comment"># Main page: Hotel listing</span>
├── <span class="file">view.php</span>                       <span class="comment"># Hotel details (SEO URL)</span>
├── <span class="file">dashboard.php</span>                  <span class="comment"># User dashboard</span>
├── <span class="file">login.php</span>                      <span class="comment"># Login form</span>
├── <span class="file">register.php</span>                   <span class="comment"># Registration form</span>
├── <span class="file">contact.php</span>                    <span class="comment"># Contact form</span>
├── <span class="file">rss.php</span>                        <span class="comment"># RSS feed generator</span>
│
├── <span class="file">admin_panel.php</span>                <span class="comment"># Admin dashboard</span>
├── <span class="file">user_management.php</span>            <span class="comment"># User CRUD (Admin)</span>
├── <span class="file">system_settings.php</span>            <span class="comment"># System config (Admin)</span>
├── <span class="file">audit_log.php</span>                  <span class="comment"># Audit log viewer (Admin)</span>
├── <span class="file">statistics.php</span>                 <span class="comment"># Statistics & charts (Admin)</span>
├── <span class="file">database_backup.php</span>            <span class="comment"># Backup/restore (Admin)</span>
│
├── <span class="file">autor.html</span>                     <span class="comment"># Author information</span>
├── <span class="file">dokumentacija.html</span>             <span class="comment"># This documentation</span>
├── <span class="file">security_report.html</span>           <span class="comment"># Security audit report</span>
│
├── <span class="file">.htaccess</span>                      <span class="comment"># Apache rewrite rules (SEO)</span>
└── <span class="file">README.md</span>                      <span class="comment"># Project overview</span>
            </div>

            <h3 class="mt-4">5.2 Popis Ključnih Datoteka</h3>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Datoteka</th>
                        <th>Linija Koda (~)</th>
                        <th>Opis</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>lib/SessionManager.php</code></td>
                        <td>~400</td>
                        <td>Kompletan auth sistem: login, logout, Remember Me, account locking</td>
                    </tr>
                    <tr>
                        <td><code>lib/AuditLog.php</code></td>
                        <td>~300</td>
                        <td>Automatsko logiranje svih DB promjena s triggers</td>
                    </tr>
                    <tr>
                        <td><code>lib/CSRFToken.php</code></td>
                        <td>~180</td>
                        <td>CSRF token generiranje i validacija</td>
                    </tr>
                    <tr>
                        <td><code>lib/SEOHelper.php</code></td>
                        <td>~150</td>
                        <td>SEO URL kreiranje, slug generiranje, XSS wrapper</td>
                    </tr>
                    <tr>
                        <td><code>index.php</code></td>
                        <td>~350</td>
                        <td>Glavni listing s modal formama za add/edit hotela</td>
                    </tr>
                    <tr>
                        <td><code>user_management.php</code></td>
                        <td>~370</td>
                        <td>Admin panel za upravljanje korisnicima</td>
                    </tr>
                    <tr>
                        <td><code>system_settings.php</code></td>
                        <td>~300</td>
                        <td>Dinamička konfiguracija sustava</td>
                    </tr>
                    <tr>
                        <td><code>statistics.php</code></td>
                        <td>~420</td>
                        <td>Statistički dashboard s Chart.js grafovima</td>
                    </tr>
                </tbody>
            </table>

            <p class="mt-3"><strong>Ukupno:</strong> ~25 PHP datoteka, ~8,000+ linija koda, 36/36 zahtjeva implementirano</p>
        </div>

        <!-- 6. UOČENI PROBLEMI -->
        <div class="doc-section" id="problemi">
            <h2><i class="bi bi-exclamation-triangle"></i> 6. Uočeni Problemi i Rješenja</h2>

            <h3>Problemi Tijekom Razvoja</h3>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th width="5%">#</th>
                        <th width="30%">Problem</th>
                        <th width="35%">Uzrok</th>
                        <th width="30%">Rješenje</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td><strong>CSRF Token Session Loss</strong></td>
                        <td>Session se resetira pri page reload zbog session_regenerate_id()</td>
                        <td>Promijenjen timing regeneracije - samo pri login/logout</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><strong>AJAX 403 Errors</strong></td>
                        <td>CSRF token nije bio proslijeđen u JSON body</td>
                        <td>Dodan JavaScript variable s tokenom + JSON validacija u API</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><strong>Prepared Statement Warning</strong></td>
                        <td>bind_param() pozvan nakon što je statement već executed</td>
                        <td>Promijenjen redoslijed: prepare → bind → execute</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><strong>SEO URL 404 Errors</strong></td>
                        <td>.htaccess rewrite rules nisu pokrivale sve patterne</td>
                        <td>Dodani QSA flag i catch-all pattern za Router.php</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><strong>Remember Me Token Collision</strong></td>
                        <td>Teoretska mogućnost dupliciranih tokena</td>
                        <td>UNIQUE constraint na token + 64-char length (bin2hex(32 bytes))</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td><strong>Audit Log Trigger Recursion</strong></td>
                        <td>UPDATE trigger kreirao novi audit log koji opet poziva trigger</td>
                        <td>Trigger provjerava NEW.updated_at != OLD.updated_at prije log</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td><strong>Chart.js Label Overlap</strong></td>
                        <td>Dugački nazivi gradova se preklapaju na X osi</td>
                        <td>Rotacija labela 45°, responsive config, maxTicksLimit: 10</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td><strong>Mobile Table Overflow</strong></td>
                        <td>Široke tablice ne stanu na mali ekran</td>
                        <td>Kreiran mobile-tables.css s data-label responsive patternima</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td><strong>Email Sending Failures</strong></td>
                        <td>SMTP nedostupan u development okruženju</td>
                        <td>Fallback na file logging + provjera mail() success</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td><strong>SQL Backup Size Issues</strong></td>
                        <td>Veliki backup fajlovi (>10MB) timeout pri restore</td>
                        <td>Povećan max_execution_time, chunk reading za restore</td>
                    </tr>
                </tbody>
            </table>

            <h3 class="mt-4">Preporuke za Buduća Poboljšanja</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="requirement-item">
                        <strong><i class="bi bi-lightning"></i> Performance:</strong>
                        <ul class="mt-2 mb-0">
                            <li>Redis/Memcached za session storage</li>
                            <li>Database query caching</li>
                            <li>CDN za static assets</li>
                            <li>Lazy loading za slike</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="requirement-item">
                        <strong><i class="bi bi-shield-plus"></i> Security:</strong>
                        <ul class="mt-2 mb-0">
                            <li>Rate limiting za API</li>
                            <li>2FA (Two-Factor Auth)</li>
                            <li>Content Security Policy headers</li>
                            <li>Password strength meter</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <div class="requirement-item">
                        <strong><i class="bi bi-stars"></i> Features:</strong>
                        <ul class="mt-2 mb-0">
                            <li>Hotel rating system</li>
                            <li>Photo gallery upload</li>
                            <li>Booking sistem</li>
                            <li>Email notifications</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="requirement-item">
                        <strong><i class="bi bi-code-square"></i> Code Quality:</strong>
                        <ul class="mt-2 mb-0">
                            <li>PHPUnit testing</li>
                            <li>PHP CodeSniffer</li>
                            <li>ESLint za JavaScript</li>
                            <li>API documentation (Swagger)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 class="mt-4">Poznata Ograničenja</h3>
            <ul>
                <li><strong>Email:</strong> Kontakt forma zahtijeva SMTP konfiguraciju za production</li>
                <li><strong>File Upload:</strong> Trenutno nema upload funkcionalnosti za hotel slike</li>
                <li><strong>Pagination:</strong> Search ne podržava pagination (prikazuje sve rezultate)</li>
                <li><strong>Internacionalizacija:</strong> Aplikacija je trenutno samo na hrvatskom jeziku</li>
                <li><strong>Browser Support:</strong> Optimizirano za moderne browsere (Chrome, Firefox, Edge, Safari)</li>
            </ul>
        </div>

        <!-- ZAKLJUČAK -->
        <div class="doc-section bg-light">
            <h2 class="text-center mb-4">
                <i class="bi bi-check-circle-fill text-success"></i> Zaključak
            </h2>
            
            <p class="lead text-center mb-4">
                Projekt <strong>Hotel Management System</strong> je u potpunosti implementiran prema svim 
                zahtjevima projektnog zadatka.
            </p>

            <div class="row text-center">
                <div class="col-md-3">
                    <div class="p-3">
                        <h1 class="text-primary display-4">36/36</h1>
                        <p class="text-muted">Zahtjeva<br>Implementirano</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-3">
                        <h1 class="text-success display-4">100%</h1>
                        <p class="text-muted">Sigurnosna<br>Zaštita</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-3">
                        <h1 class="text-info display-4">8000+</h1>
                        <p class="text-muted">Linija<br>Koda</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-3">
                        <h1 class="text-warning display-4">25+</h1>
                        <p class="text-muted">PHP<br>Datoteka</p>
                    </div>
                </div>
            </div>

            <hr class="my-4">

            <div class="text-center">
                <p><strong>Sustav je spreman za produkcijsko okruženje uz slijedeće korake:</strong></p>
                <ol class="text-start" style="max-width: 600px; margin: 0 auto;">
                    <li>Konfiguracija production database credentialsa</li>
                    <li>SMTP setup za email notifikacije</li>
                    <li>SSL certifikat za HTTPS</li>
                    <li>Backup strategy implementacija</li>
                    <li>Security headers u .htaccess</li>
                </ol>
            </div>
        </div>

        <!-- Quick Links -->
        <div class="text-center mt-4 mb-5">
            <a href="index.php" class="btn btn-lg" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <i class="bi bi-house-door"></i> Početna Stranica
            </a>
            <a href="autor.html" class="btn btn-outline-primary btn-lg">
                <i class="bi bi-person"></i> O Autoru
            </a>
            <a href="security_report.html" class="btn btn-outline-success btn-lg">
                <i class="bi bi-shield-check"></i> Sigurnosni Izvještaj
            </a>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-dark text-white py-4 mt-5">
        <div class="container text-center">
            <p class="mb-2">
                <i class="bi bi-c-circle"></i> 2026 Hotel Management System
            </p>
            <p class="mb-0 text-muted">
                Projektni rad iz kolegija Programiranje za Web
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Smooth Scroll for Navigation -->
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>
